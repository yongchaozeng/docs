# 三次握手和四次挥手

### 三次握手

- 客户端发送 SYN，ISNc
- 服务端发送 SYN 和 ACK(ISNc+1)
- 客户端发送 ISNs+1

客户端发送 SYN = 1 ACK = 0 seq = 123

服务端发送 SYN = 1 ACK = 1 seq = 456

客户端发送 SYN=0 ACK = 1

SYN ACK 标记位 seq 序号 ack 确认
| 请求 1 | | |
| --------------- | --- | --- |
| SYN = 1 ACK = 0 | seq | ack |
| 原生 | s1 | 0 |
| 相对 | 0 | 0 |

| 请求 2          |     |      |
| --------------- | --- | ---- |
| SYN = 1 ACK = 1 | seq | ack  |
| 原生            | s2  | s1+1 |
| 相对            | 0   | 1    |

| 请求 3          |      |      |
| --------------- | ---- | ---- |
| SYN = 0 ACK = 1 | seq  | ack  |
| 原生            | s1+1 | s2+1 |
| 相对            | 1    | 1    |

### 四次挥手

- 客户端发送连接释放
- 服务端收到连接释放
- 服务端发出连接释放报文段
- 即客户端收到服务端的连接释放报文段后，对此发出确认报文段

### 请求方法

### 请求头

q = xxx 权重值 越大越优先

- user-agent ： 浏览器身份标识 浏览器版本，操作系统
- date ： 浏览器身份标识 浏览器版本，操作系统
- content-type ： 浏览器身份标识 浏览器版本，操作系统
- content-length ： 浏览器身份标识 浏览器版本，操作系统
- referer ： 浏览器身份标识 浏览器版本，操作系统
- accept ： 能接受的响应内容类型
- accept-charset ： 能接受的字符集
- accept-encoding ： 能接受的编码压缩方式列表
- accept-language ： 能接受的自然语言列表
- Range ： 请求实体某个部分，字节偏移从 0 开始 断点下载
- origin ： 针对跨域资源共享的请求
- cookie ： 针对跨域资源共享的请求
- connection ： 针对跨域资源共享的请求
- cache-control ： 针对跨域资源共享的请求

### 响应头

- user-agent ： 浏览器身份标识 浏览器版本，操作系统
- content-type ： 响应体类型
- content-Encoding ： 内容所用编码类型
- content-length ： 响应体长度
- content-disposition ： 建议下载文件文件名的头部
- accept-Ranges ： 服务器支持的部分内容范围
- Access-Control-Allow-Origin ： 该消息属于完整消息的哪部分
- Location ： 该消息属于完整消息的哪部分
- Set-Cookie ： 该消息属于完整消息的哪部分
- connection ： 该消息属于完整消息的哪部分
- Cache-Control ： 该消息属于完整消息的哪部分
- Etag ： 该消息属于完整消息的哪部分

### 状态码分类：

- 1XX- 信息响应，服务器收到请求，需要请求者继续操作。
- 2XX- 成功响应，请求成功收到，理解并处理。
- 3XX - 重定向，需要进一步的操作以完成请求。
- 4XX - 客户端错误，请求包含语法错误或无法完成请求。
- 5XX - 服务器错误，服务器在处理请求的过程中发生了错误。

### 常见状态码：

100 请求被服务接受，没被服务器拒绝
200 OK - 客户端请求成功
301 - 资源（网页等）被永久转移到其它 URL
302 - 临时跳转到 Location 指定 URL
304 - 无再次传输内容，可以使用缓存内容
400 Bad Request - 客户端请求有语法错误
401 Unauthorized - 请求未经授权，这个状态代码必须和 WWW-Authenticate 报头域一起使用
403 - 服务器有能力，但拒绝授权访问
404 - 请求资源不存在，可能是输入了错误的 URL
405 - 服务器禁止改 http 请求方法
500 - 服务器内部发生了不可预期的错误
501 - 请求方法不被服务器支持
503 Server Unavailable - 服务器当前不能处理客户端的请求，一段时间后可能恢复正常。

### form 提交

action:url

method：请求方法

enctype：POST 请求时编码方式

- application/x-www-form-urlencoded（默认值）
- multipart/form-data 文件上传时必须使用这种编码方式

### 跨域
同源策略

### 缓存

### 代理

#### 正向代理 为客户端服务
隐藏客户端身份

绕过防火墙 比如翻墙

internet访问控制 控制是否可以上网

数据过滤   比如过滤血腥暴力

#### 反向代理 为服务端服务

隐藏服务器身份

安全防护

负载均衡

Fiddler、Charles 等抓包工具的原理：在客户端启动了正向代理服务

#### 代理服务器-相关请求头


#### CDN

