# 网络模型 5层

- 应用层 http ftp
- 传输层 tcp udp
- 网络 ip
- 链路层
- 物理层

### 物理层

定义接口标准、线缆标准

- 模拟信号：连续的信号，适合长距离传输，但是抗干扰能力弱
- 数字信号：离散信号，不适合长距离，抗干扰强

##### 信道
- 单工通信 
信号只能往一个方向传输，任何时候都不能改变信号的传输方向
比如无线电广播、有线电视广播

- 半双工通信 
信号可以双向传输，但必须是交替进行，同一时间只能往一个方向传输
比如对讲机

- 全双工通信
信号可以同时双向传输
比如手机（打电话，听说同时进行

### 数据链路层（Data Link）
链路：从1个节点到相邻节点的一段物理线路（有线或无线），中间没有其他交换节点

- 广播信道：CSMA/CD协议（比如同轴电缆、集线器等组成的网络）
- 点对点信道：PPP协议（比如2个路由器之间的信道） 可以不知道mac地址

##### 数据链路层的3个基本问题（任何链路都需要）

- 封装成帧
以太网的MTU为1500个字节

- 透明传输 
使用 SOH（Start Of Header）作为 帧开始符
使用 EOT（End Of Transmission）作为 帧结束符
所以数据部分一旦出现了SOH、EOT，就需要进行转义：在后面加上ESC

- 差错检验
FCS是根据数据部分 + 首部计算得出的，数据传输前和传输后都会计算FCS用来检验数据是否出错。




### 传输层 (Transport）

-  TCP（Transmission Control Protocol），传输控制协议
-  UDP（User Datagram Protocol），用户数据报协议
 
| 一个普通标题 | 一个普通标题 | 一个普通标题 |
| ------ | ------ | --- --- |
| 短文本 | 中等文本 | 稍微长一点的文本 |
| 稍微长一点的文本 | 短文本 | 中等文本 |

##### UDP（User Datagram Protocol），用户数据报协议
- 数据格式 
UDP无连接，没有建立连接和释放连接减少了开销，首部只有8字节，但是不保证可靠传输
UDP长度16字节，首部长度加数据长度

- 检验和（Checksum）
检验和的计算内容：伪首部 + 首部 + 数据。伪首部：仅在计算检验和时起作用，并不会传递给网络层

- 端口（Port）UDP首部中端口是占用2字节
可以推测出端口号的取值范围是：0~65535
    - netstat –an：查看被占用的端口
    - netstat –anb：查看被占用的端口、占用端口的应用程序
    - telnet 主机 端口：查看是否可以访问主机的某个端口

### TCP
- 可靠传输  
ARQ协议 自动重传请求
滑动窗口协议 等待一定时间后没有第3个包，就会返回确认收到2个包给发送方
SACK（选择性确定） 丢包后重新获取，只会获取丢失的那个包

- 流量控制
流量控制是点对点，端对端
通过对报文的窗口字段来控制发送速率，发送窗口大小不能超过接受窗口大小

- 拥塞控制
- 连接管理（建立连接、释放连接）


